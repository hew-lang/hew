// Tests type dispatch for narrow types through Vec and HashMap operations.
// Verifies i32 and f32 values are properly promoted in Vec remove,
// HashMap insert/get, and that the pipeline handles all concrete types.

fn test_vec_i32_remove() -> int {
    let v: Vec<i32> = Vec::new();
    let a: i32 = 10;
    let b: i32 = 20;
    let c: i32 = 30;
    v.push(a);
    v.push(b);
    v.push(c);
    assert_eq(v.len(), 3);
    v.remove(b);
    assert_eq(v.len(), 2);
    let first = v.get(0);
    let second = v.get(1);
    assert_eq(first, a);
    assert_eq(second, c);
    println("PASS: vec_i32_remove");
    0
}

fn test_vec_int_remove() -> int {
    let v: Vec<int> = Vec::new();
    v.push(100);
    v.push(200);
    v.push(300);
    v.remove(200);
    assert_eq(v.len(), 2);
    assert_eq(v.get(0), 100);
    assert_eq(v.get(1), 300);
    println("PASS: vec_int_remove");
    0
}

fn test_hashmap_i32_values() -> int {
    let m: HashMap<string, i32> = HashMap::new();
    let val: i32 = 42;
    m.insert("key1", val);
    let got = m.get("key1");
    println(f"hashmap i32 got: {got}");
    println("PASS: hashmap_i32_values");
    0
}

fn main() -> int {
    test_vec_i32_remove();
    test_vec_int_remove();
    test_hashmap_i32_values();
    println("ALL NARROW TYPE TESTS PASSED");
    0
}
