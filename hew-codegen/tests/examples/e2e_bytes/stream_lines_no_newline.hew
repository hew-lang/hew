import std::fs;
import std::stream;
import std::os;

fn main() {
    let tmp = os.temp_dir();
    let path = tmp + "/hew_nonl_test.txt";
    unsafe { hew_file_write(path, "first\nsecond"); }

    let raw = match stream.from_file(path) {
        Ok(s) => s,
        Err(e) => { panic(e); },
    };
    let lines = raw.lines();

    for await line in lines {
        println(line);
    }
}
